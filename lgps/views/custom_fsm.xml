<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <record model="ir.ui.view" id="custom_lmmx_fsm_form_view">
    <field name="name">lgps.custom.fsm</field>
    <field name="model">project.task</field>
    <field name="inherit_id" ref="project.view_task_form2"/>
    <field name="arch" type="xml">
        <xpath expr="//field[@name='user_ids']" position="after">
          <field name="device_id"/>
          <field name="nick"/>
        </xpath>

      <xpath expr="//form[1]/sheet[1]/notebook[1]" position="inside">
        <page string="Commissions">
          <group>
            <group string="Operations">
              <field name="gps_installation_operation"/>
              <field name="accessories_installation_operation"/>
              <field name="temperature_sensor_installation_operation"/>
              <field name="dvr_installation_operation"/>
              <field name="fuel_tank_calibration_operation"/>
              <field name="float_assembly_operation"/>
            </group>
            <group string="Services">
              <field name="gps_installation_service"/>
              <field name="gps_reinstallation_service"/>
              <field name="temperature_sensor_installation_service"/>
              <field name="float_assembly_service"/>
              <field name="fuel_tank_calibration_service"/>
              <field name="maintenance_service"/>
              <field name="unistallation_service"/>
              <field name="float_disassembly_service"/>
              <field name="accessories_installation_service"/>
            </group>
          </group>

        </page>
          <page string="More Data" name="More Data">
            <group>
              <group>
                <field
                        name="show_timesheet_in_report"
                        string="Show Timesheet in Report"
                        force_save="True"
                        attrs="{}"
                        readonly="1"
                        help="Si esta activado, se mostrará el detalle del tiempo en el reporte PDF  que se entrega al cliente final"/>
              </group>
              <group>
                <field
                        name="parent_sales_order_id"
                        options="{&quot;no_create&quot;:true}"
                        help="Pedido de Ventas que Originó la instalación"/>
              </group>
            </group>
          </page>
        <page string="Warranty" name="Warranty" groups="lgps.lgps_group_quality_operations">
          <group>
            <field name="is_warranty"/>
            <field name="guarantee_justification"
                   widget="html"
                   attrs="{'required':[('is_warranty','=', True)], 'invisible':[('is_warranty','!=', True)]}"/>
          </group>
        </page>
        <page string="Repair Order" name="Repair Order" attrs="{'invisible':[('is_warranty','!=', True)]}">
          <group>
              <group>
                <field
                        name="repair_id"
                        options="{'no_create': False, 'no_create_edit':False}"
                        context="{'default_partner_id': partner_id}"/>
                      <!-- attrs="{'required':[('is_warranty','=', True)]}"-->
              </group>
          </group>
        </page>
        </xpath>
    </field>
  </record>
</odoo>
